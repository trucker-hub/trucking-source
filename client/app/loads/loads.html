<div ng-include="'components/navbar/navbar.html'"></div>

<br>
<div class="container">

    <tabset type="tabs">

        <tab heading="Loads">
            <br>
            <div class="row">
                <div class="col-md-9">
                    <button class="btn btn-sm btn-default" type="button" ng-click="newFTLLoad()">Create FTL load</button>
                    <button class="btn btn-sm btn-default" type="button" ng-click="createLTLLoad()">Create LTL load</button>
                </div>
                <div class="col-md-3">
                    <button class="btn btn-sm btn-primary" type="button" ng-click="loadLoads()">Query</button>
                </div>

            </div>
            <br>
            <table ng-table="tableParams" show-filter="true" class="table table-responsive table-hover">
                <tr>
                    <th>Type</th>
                    <th>Customer</th>
                    <th>To</th>
                    <th>From</th>
                    <th>Requested on</th>
                    <th>Expected By</th>
                    <th>Status</th>
                    <th>Load Description</th>
                    <th></th>
                </tr>

                <tr ng-repeat="load in $data">
                    <td>FTL</td>
                    <td data-title="'Who'" filter="{ 'name': 'text' }">
                        {{load.who}}
                    </td>
                    <td data-title="'To'">
                        {{load.shipTo.location | location: true}}
                    </td>
                    <td data-title="'From'">
                        {{load.shipFrom.location | location: true}}
                    </td>
                    <td data-title="'Created'">
                        {{load.createdAt | date:'short'}}
                    </td>
                    <td data-title="'Expected By'">
                        {{load.expectedBy | date:'short'}}
                    </td>
                    <td data-title="'Status'">
                        {{load.source }}
                    </td>
                    <td data-title="'Description'">
                        <span>{{load.description}}</span>
                    </td>
                    <td data-title="'Edit'">
                        <a><span class="glyphicon glyphicon-pencil" aria-hidden="true" ng-click="editLoad(load._id)"></span></a>
                    </td>
                </tr>
            </table>
        </tab>

        <tab ng-repeat="(id, item) in loadsOpened" active="item.active">
            <tab-heading><span>{{item.data.who }}</span>&nbsp<a><span class="glyphicon glyphicon-remove-circle" aria-hidden="true" ng-click="closeTab(id)"></span></a></tab-heading>
            <div ng-include src="'app/loads/ftl/ftl.html'" ng-controller="FtlCtrl as ftlCtrl" ng-init="ftlCtrl.init(item.data)"></div>
        </tab>


</div>
